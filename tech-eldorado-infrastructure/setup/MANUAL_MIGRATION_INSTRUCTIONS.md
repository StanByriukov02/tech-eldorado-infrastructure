# Ğ Ğ£Ğ§ĞĞĞ¯ MIGRATION (ĞµÑĞ»Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚)

**ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ:** DNS Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ•:** Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ SQL Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· Supabase Dashboard

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸš€ Ğ¨ĞĞ“ 1: Ğ’Ğ«ĞŸĞĞ›ĞĞ˜Ğ¢Ğ¬ SQL MIGRATION

### 1.1. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Supabase Dashboard

```
1. Ğ—Ğ°Ğ¹Ñ‚Ğ¸ Ğ½Ğ°: https://supabase.com/dashboard
2. Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚: Tech Eldorado
3. Ğ’ Ğ»ĞµĞ²Ğ¾Ğ¼ Ğ¼ĞµĞ½Ñ: SQL Editor
```

### 1.2. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ SQL Ğ¸Ğ· Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

```
1. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»: drizzle/0000_thin_ulik.sql
2. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ’Ğ•Ğ¡Ğ¬ SQL ĞºĞ¾Ğ´
3. Ğ’ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² SQL Editor
4. ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "Run" (Ğ¸Ğ»Ğ¸ F5)
```

**ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```
Success. No rows returned
```

### 1.3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹

```
1. Ğ’ Ğ»ĞµĞ²Ğ¾Ğ¼ Ğ¼ĞµĞ½Ñ: Table Editor
2. Ğ”Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ²ÑĞµ 14 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†:
   - departments
   - agents
   - tasks
   - chain_of_thought_logs
   - messages
   - products
   - partnerships
   - knowledge_items
   - nccl_events
   - company_metrics
   - agent_memory
   - math_validations
   - agent_decisions
   - pixeltable_sync
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸŒ± Ğ¨ĞĞ“ 2: Ğ’Ğ«ĞŸĞĞ›ĞĞ˜Ğ¢Ğ¬ SEED (initial data)

### 2.1. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ seed ÑĞºÑ€Ğ¸Ğ¿Ñ‚

```bash
cd C:\Users\dammi\tech-eldorado-infrastructure
npm run seed
```

**ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```
ğŸŒ± Seeding database...
âœ… CEO user found: [user-id]
ğŸ“ Creating departments...
   âœ… TEAM 0 - Research Foundation
   âœ… EGER - Engineering Department
   âœ… Innovation Lab
   âœ… Marketing & Sales
   âœ… Executive
âœ… Created 5 departments
```

**Ğ•ÑĞ»Ğ¸ seed Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¸Ğ·-Ğ·Ğ° DNS:**
- ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ departments Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· Supabase Dashboard â†’ Table Editor
- Ğ˜Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Supabase API Ñ‡ĞµÑ€ĞµĞ· REST

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ”’ Ğ¨ĞĞ“ 3: Ğ’Ğ«ĞŸĞĞ›ĞĞ˜Ğ¢Ğ¬ RLS POLICIES

### 3.1. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ SQL Editor

```
1. Supabase Dashboard â†’ SQL Editor
```

### 3.2. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ RLS policies

```
1. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»: backend/db/sql/rls-policies.sql
2. Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ’Ğ•Ğ¡Ğ¬ SQL ĞºĞ¾Ğ´
3. Ğ’ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² SQL Editor
4. ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "Run" (Ğ¸Ğ»Ğ¸ F5)
```

**ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**
```
Success. No rows returned
```

### 3.3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ RLS

```
1. Settings â†’ Database â†’ Policies
2. Ğ”Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ²ÑĞµ policies Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## âœ… Ğ§Ğ•ĞšĞ›Ğ˜Ğ¡Ğ¢

- [ ] SQL migration Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ° (14 Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹)
- [ ] Seed Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½ (5 departments ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹)
- [ ] RLS policies Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ñ‹ (policies Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ² Dashboard)
- [ ] Ğ’ÑĞµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ² Table Editor
- [ ] CEO Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· API)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ” TROUBLESHOOTING

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: "relation already exists"

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ ÑƒĞ¶Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ñ‹
- ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ migration, Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº seed

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: "permission denied"

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑˆÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ API key
- Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ÑŒÑÑ Ñ‡Ñ‚Ğ¾ CEO Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
- Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ RLS policies

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Seed Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚Ğ¾ CEO user ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ (npm run test:ceo:auto)
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ departments Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· Table Editor
- Ğ˜Ğ»Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Supabase REST API

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

**ĞŸĞ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ²ÑĞµÑ… ÑˆĞ°Ğ³Ğ¾Ğ² â†’ Ğ¤ĞĞ—Ğ 2.1 Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°!** âœ…

